{"version":3,"sources":["js/commands.js","js/events.js"],"names":["order","players","turn","lastTurnIndex","stack","Stack","command","input","match","player","length","Error","playerName","count","number","response","play","history","name","Player","push","player1","player2","lie","JSON","parse","bs","liar","pb","cardholder","cards","Erorr","PNotify","prototype","options","styling","$","document","ready","keyup","isCommand","val","this","removeClass","parent","addClass","click","output","text","message","type","stringify","clearTextbox","cb","prop","find","textboxInterval","setInterval","slice","clearInterval","focus"],"mappings":"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","file":"scripts.min.js","sourcesContent":["var order = [],\n    players = {},\n    turn = 0,\n    lastTurnIndex = 0,\n    stack = new Stack();\n\nvar command = function(input) {\n  if (input.match(/(\\d+), *(\\d+)/g)) {\n    var player = players[order[turn % order.length]];\n    if (!player) return new Error('Player not found');\n    var playerName = order[turn % order.length];\n    var count = input.match(/(\\d+), *(\\d+)/i)[1];\n    var number = input.match(/(\\d+), *(\\d+)/i)[2];\n    var response = player.turn.play(count, number);\n    if (response) return response;\n    turn++;\n    lastTurnIndex = stack.history.length;\n    return 'Player \"' + playerName + '\" played ' + count + ' ' + number + 's';\n  } else if (input.match(/Add *Player,? *(\\w*)/i)) {\n    var name = input.match(/Add *Player,? *(\\w*)/i)[1];\n    players[name] = new Player(stack);\n    order.push(name);\n    return 'Added Player \"' + name + '\"';\n  } else if (input.match(/bs,? *(\\w*),? *(\\w*),? *(true|false)/i)) {\n    var player1 = input.match(/bs,? *(\\w*),? *(\\w*),? *(true|false)/i)[1];\n    if (!players[player1]) return new Error('Player not found');\n    var player2 = input.match(/bs,? *(\\w*),? *(\\w*),? *(true|false)/i)[2];\n    var lie = JSON.parse(input.match(/bs,? *(\\w*),? *(\\w*),? *(true|false)/i)[3]);\n    players[player1].turn.bs(players[player2], lie);\n    if (lie) {\n      return 'Nice Call!';\n    } else {\n      return 'Better luck next time!';\n    }\n  } else if (input.match(/pb,? *(\\w*)/i)) {\n    var liar = input.match(/pb,? *(\\w*)/i)[1];\n    if (!players[liar]) return new Error('Player not found');\n    players[liar].turn.pb();\n    return 'Thanks for telling me!';\n  } else if (input.match(/cards,? *(\\w*)/i)) {\n    var cardholder = input.match(/cards,? *(\\w*)/i)[1];\n    if (cardholder === 'stack') {\n      return stack.count();\n    } else {\n      if (!players[cardholder]) return new Erorr('Player not found');\n      return players[cardholder].cards();\n    }\n  } else {\n    return new Error('Unknown command');\n  }\n};\n","PNotify.prototype.options.styling = \"fontawesome\";\n$(document).ready(function() {\n\n  //input keypress event:\n  $('input.command').keyup(function() {\n    var isCommand = false;\n    var input = $('input.command').val();\n    if (input.match(/(\\d+), *(\\d+)/g)) isCommand = true;\n    if (input.match(/Add *Player,? *(\\w*)/i)) isCommand = true;\n    if (input.match(/bs,? *(\\w*),? *(\\w*),? *(true|false)/i)) isCommand = true;\n    if (input.match(/pb,? *(\\w*)/i)) isCommand = true;\n    if (input.match(/cards,? *(\\w*)/i)) isCommand = true;\n    if ($('input.command').val() === '') {\n      $(this).removeClass('form-control-success').removeClass('form-control-error').parent().removeClass('has-success').removeClass('has-error');\n    } else if (isCommand) {\n      $(this).addClass('form-control-success').removeClass('form-control-error').parent().addClass('has-success').removeClass('has-error');\n    } else {\n      $(this).addClass('form-control-error').removeClass('form-control-success').parent().addClass('has-error').removeClass('has-success');\n    }\n  });\n\n  //command submit event:\n  $('.submit').click(function() {\n    var input = $('input.command').val();\n    var output = command(input);\n    if (output instanceof Error) {\n      new PNotify({\n        text: output.message,\n        type: 'error'\n      });\n    } else if (typeof output === 'object') {\n      new PNotify({\n        text: JSON.stringify(output),\n        type: 'info'\n      });\n      clearTextbox();\n    } else {\n      new PNotify({\n        text: output,\n        type: 'success'\n      });\n      clearTextbox();\n    }\n  });\n});\n\nvar clearTextbox = function(cb) {\n  $('.submit').prop('disabled', true).parent().find('input.command').prop('disabled', true);\n  var textboxInterval = setInterval(function() {\n    $('input.command').val($('input.command').val().slice(0, -1));\n    if ($('input.command').val() === '') {\n      $('.submit').prop('disabled', false).parent().find('input.command').prop('disabled', false);\n      clearInterval(textboxInterval);\n      $('input.command').focus().keyup();\n      if (cb) cb();\n    }\n  }, 50);\n};\n"],"sourceRoot":"/source/"}