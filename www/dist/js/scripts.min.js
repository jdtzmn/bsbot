var order=[],players={},turn=0,lastTurnIndex=0,stack=new Stack,command=function(r){if(r.match(/(\d+), *(\d+)/g)){var e=players[order[turn%order.length]];if(!e)return new Error("Player not found");var a=order[turn%order.length],t=r.match(/(\d+), *(\d+)/i)[1],n=r.match(/(\d+), *(\d+)/i)[2],l=e.turn.play(t,n);return l?l:(turn++,lastTurnIndex=stack.history.length,'Player "'+a+'" played '+t+" "+n+"s")}if(r.match(/Add *Player,? *(\w*)/i)){var s=r.match(/Add *Player,? *(\w*)/i)[1];return players[s]=new Player(stack),order.push(s),'Added Player "'+s+'"'}if(r.match(/bs,? *(\w*),? *(\w*),? *(true|false)/i)){var d=r.match(/bs,? *(\w*),? *(\w*),? *(true|false)/i)[1];if(!players[d])return new Error("Player not found");var u=r.match(/bs,? *(\w*),? *(\w*),? *(true|false)/i)[2],c=JSON.parse(r.match(/bs,? *(\w*),? *(\w*),? *(true|false)/i)[3]);return players[d].turn.bs(players[u],c),c?"Nice Call!":"Better luck next time!"}if(r.match(/pb,? *(\w*)/i)){var o=r.match(/pb,? *(\w*)/i)[1];return players[o]?(players[o].turn.pb(),"Thanks for telling me!"):new Error("Player not found")}if(r.match(/cards,? *(\w*)/i)){var i=r.match(/cards,? *(\w*)/i)[1];return"stack"===i?stack.count():players[i]?players[i].cards():new Erorr("Player not found")}return new Error("Unknown command")};
PNotify.prototype.options.styling="fontawesome",$(document).ready(function(){$("input.command").keyup(function(){var e=!1,s=$("input.command").val();s.match(/(\d+), *(\d+)/g)&&(e=!0),s.match(/Add *Player,? *(\w*)/i)&&(e=!0),s.match(/bs,? *(\w*),? *(\w*),? *(true|false)/i)&&(e=!0),s.match(/pb,? *(\w*)/i)&&(e=!0),s.match(/cards,? *(\w*)/i)&&(e=!0),""===$("input.command").val()?$(this).removeClass("form-control-success").removeClass("form-control-error").parent().removeClass("has-success").removeClass("has-error"):e?$(this).addClass("form-control-success").removeClass("form-control-error").parent().addClass("has-success").removeClass("has-error"):$(this).addClass("form-control-error").removeClass("form-control-success").parent().addClass("has-error").removeClass("has-success")}),$(".submit").click(function(){var e=$("input.command").val(),s=command(e);s instanceof Error?new PNotify({text:s.message,type:"error"}):"object"==typeof s?(new PNotify({text:JSON.stringify(s),type:"info"}),clearTextbox()):(new PNotify({text:s,type:"success"}),clearTextbox())})});var clearTextbox=function(e){$(".submit").prop("disabled",!0).parent().find("input.command").prop("disabled",!0);var s=setInterval(function(){$("input.command").val($("input.command").val().slice(0,-1)),""===$("input.command").val()&&($(".submit").prop("disabled",!1).parent().find("input.command").prop("disabled",!1),clearInterval(s),$("input.command").focus().keyup(),e&&e())},50)};
//# sourceMappingURL=scripts.min.js.map
